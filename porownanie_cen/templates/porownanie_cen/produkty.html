{% extends 'porownanie_cen/base.html' %}

{% block body %}
{% load static %}

  <div class="row mx-2" >
    <div class="col-12 col-lg-3 p-0">
      <table class="table table-sm table-dark" >
        <thead>
          <tr class="bg-secondary text-center border text-warning">

            <th colspan="2" class="border border-right-0 text-right">Razem:</th>
            <th class="border border-left-0" id="lowest_sum">0.00</th>
          </tr>
          <tr class="bg-primary text-light text-center" >
            {% with x=kontrahenci_length %}
            {% if x > 5 %}
            <th class="border" scope="col"><small>KOD</small></th>
            <th class="border" scope="col"><small>Ilość</small></th>
            <th class="border" scope="col"><small>CENA</small></th>

            {% else %}
            <th class="border" scope="col">KOD</th>
            <th class="border" scope="col">Ilość</th>
            <th class="border" scope="col">CENA</th>

            {% endif %}
            {% endwith %}


          </tr>
        </thead>
        <tbody>
            {% for code in code_price %}
          <tr >
            {% if code %}
            <td class="codes-background text-center border text-dark " >{{code.0.kodtowaru}}</td>
            <td class="table-background text-center border text-dark " >1</td>
            <td class="lowest-background text-center border text-light " id="lowest_{{forloop.counter}}">{{code.0.cenakoncowa_eur__min}}</td>
            {% else %}
            <td class="bg-danger text-center border text-light">brak</td>
            <td class="table-background text-center border text-dark " >0</td>
            <td class="lowest-background text-center border text-light " id="lowest_{{forloop.counter}}">0</td>
            {% endif %}

          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="col-12 col-lg-9 p-0">
      <table class="table table-sm table-dark" id="result">
        <thead>
          <tr class="text-center bg-secondary  text-warning">
            {% for kontrahent in kontrahenci %}
            <th class="border" id="cena_kontrahent_{{forloop.counter}}">
              0.00
            </th>
            {% endfor %}
          </tr>
          <tr class="bg-primary text-center border border-dark text-light ">
            {% for kontrahent in kontrahenci %}
            {% with x=kontrahenci_length %}
            {% if x > 5 %}
            <th class="border"><small>{{ kontrahent.kontrahentkod }}</small></th>
            {% else %}
            <th class="border">{{ kontrahent.kontrahentkod }}</th>
            {% endif %}
            {% endwith %}
          {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% if final_result %}
            <tr class="row_result" >
          {% endif %}
            {% for item in final_result %}
              {% if  item.0.cenakoncowa_eur %}
                <td class="text-center table-background  border border-dark text-dark" id="{{forloop.counter}}">{{ item.0.cenakoncowa_eur }}</td>
              {% else %}
                <td class="text-center table-background border border-dark text-danger" id="{{forloop.counter}}">N/A</td>
              {% endif %}
              <!-- if last column in row -->
              {% with num=kontrahenci_length %}
                {% if forloop.counter|divisibleby:num and not forloop.last %}
              </tr>
              <tr class="row_result" >
            {% endif %}
          {% endwith %}
        {% endfor %}
      </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</div>



{% endblock %}
