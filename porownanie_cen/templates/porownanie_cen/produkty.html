{% extends 'porownanie_cen/base.html' %}

{% block body %}
{% load static %}
  <div class="row mx-2 " >
    <div class="col-12 col-lg-3 p-0">
      <table class="w-100" id="prices" >
        <thead>
          <tr class="bg-secondary text-center border text-warning">

            <th colspan="2" class="border border-right-0 text-right">Razem:</th>
            <th class="border border-left-0" id="lowest_sum">0.00</th>
          </tr>
          <tr class="bg-primary text-light text-center" >
            <th class="border p-1" scope="col">
              <button class="btn py-0 px-1 btn-tarnsparent text-white far fa-copy" onclick="copy()"  data-toggle="tooltip" data-placement="top" title="Kopiuj do Schowka" id="copyButton"></button>
              <small>KOD</small>
            </th>
            <th class="border p-1" scope="col"><small>Ilość</small></th>
            <th class="border p-1" scope="col"><small>CENA</small></th>
          </tr>
        </thead>
        <tbody>
            {% for code in code_price %}
          <tr>
            {% if code.0.cenakoncowa_eur__min %}
            <td class="codes-background text-center border text-dark " >
              {{code.0.kodtowaru}}
            </td>
            <td class="table-background text-center border text-dark " >1</td>
            <!--suppress XmlDuplicatedId -->
            <td class="lowest-background text-center border text-light " id="lowest_{{forloop.counter}}">{{code.0.cenakoncowa_eur__min}}</td>
            {% else %}
            <td class="bg-danger text-center border text-dark " >
              {{code}}
            </td>
            <td class="bg-danger text-center border text-dark " >0</td>
            <!--suppress XmlDuplicatedId -->
            <td class="bg-danger text-center border text-light " id="lowest_{{forloop.counter}}">0</td>

            {% endif %}

          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="col-12 col-lg-9 p-0">
      <table class="w-100" id="result">
        <thead>
          <tr class="text-center bg-secondary  text-warning">
            {% for kontrahent in kontrahenci %}
            <th class="border" id="cena_kontrahent_{{forloop.counter}}">
              0.00
            </th>
            {% endfor %}
          </tr>
          <tr  class="bg-primary text-center border border-dark text-light">
            {% for kontrahent in kontrahenci %}
            {% with x=kontrahenci_length %}
            {% if x > 5 %}
            <th class="border p-1" ><small>{{ kontrahent.kontrahentkod }}</small></th>
            {% else %}
            <th class="border p-1" >{{ kontrahent.kontrahentkod }}</th>
            {% endif %}
            {% endwith %}
          {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% if final_result %}
            <tr class="row_result" >
          {% endif %}
            {% for item in final_result %}
              {% if  item.0.cenakoncowa_eur %}
                <td class="text-center table-background  border border-dark text-dark" id="{{forloop.counter}}">{{ item.0.cenakoncowa_eur }}</td>
              {% else %}
                <td class="text-center table-background border border-dark text-danger" id="{{forloop.counter}}">N/A</td>
              {% endif %}
              <!-- if last column in row -->
              {% with num=kontrahenci_length %}
                {% if forloop.counter|divisibleby:num and not forloop.last %}
              </tr>
              <tr class="row_result" >
            {% endif %}
          {% endwith %}
        {% endfor %}
      </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</div>
<textarea name="name" rows="1" cols="80" id="copy" style="opacity:0;"></textarea>
{{code_price}}
{% endblock %}
